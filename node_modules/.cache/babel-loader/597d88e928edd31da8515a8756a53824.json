{"ast":null,"code":"var _jsxFileName = \"/Users/tblanchet/Desktop/book-search-react/src/components/App.js\";\nimport React from 'react';\nimport SearchForm from './SearchForm';\nimport SearchResult from './SearchResult'; // import API from '../services/API';\n\nimport books from '../sample-books';\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      searchresults: [],\n      errorMessage: ''\n      /* I had several problems with the open books api:\n         First I couldn't find a way to search by title or author, just by an id like isbn (reasonable),\n         then I had a CORS policy error, which I overlooked by using a proxy I found on the internet,\n         and at last all my requests were returning an empty object, weird because when using curl on\n         my console they did return book information (although not something I could directly use here)\n         so, in order to not waste more time, I decided to just create some preloaded objects for the excercise,\n         and leave this unused code here so you could take a look at what I was trying to do.\n      \n      searchByIsbn = async (query) => {\n        try {\n          const parameters = `api/autbibkeys=ISBN:${query}`;\n          const response = await API.makeRequest({ parameters: parameters, method: 'GET', data: this.state.searchresults });\n          console.log(response);\n        } catch (error) {\n          alert(error);\n        }\n      }\n      */\n\n    };\n\n    this.searchForBooks = (query, type) => {\n      let searchresults;\n\n      switch (type) {\n        case 'title':\n        case 'author':\n          searchresults = books.filter(book => book[type].toLowerCase().trim().indexOf(query.toLowerCase().trim()) > -1);\n          break;\n\n        case 'isbn':\n          searchresults = books.filter(book => book[type].toString().trim() === query.trim());\n          break;\n\n        default:\n          return;\n      }\n\n      if (searchresults.length < 1) {\n        this.setState({\n          errorMessage: 'No results found.'\n        });\n      } else {\n        this.setState({\n          errorMessage: ''\n        });\n      }\n\n      this.setState({\n        searchresults\n      });\n    };\n  }\n\n  componentDidMount() {// const localStorageRef = localStorage.getItem();\n    // if(localStorageRef) {\n    //   this.setState({searchresults: JSON.parse(localStorageRef)});\n    // }\n  }\n\n  componentDidUpdate() {\n    localStorage.setItem('searchresults', JSON.stringify(this.state.searchresults));\n    console.log(localStorage);\n  }\n\n  render() {\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(SearchForm, {\n      searchForBooks: this.searchForBooks,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \" \", this.state.errorMessage), React.createElement(\"ul\", {\n      className: \"search-results\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, this.state.searchresults.map(searchResult => React.createElement(SearchResult, {\n      key: searchResult.isbn,\n      details: searchResult,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/tblanchet/Desktop/book-search-react/src/components/App.js"],"names":["React","SearchForm","SearchResult","books","App","Component","state","searchresults","errorMessage","searchForBooks","query","type","filter","book","toLowerCase","trim","indexOf","toString","length","setState","componentDidMount","componentDidUpdate","localStorage","setItem","JSON","stringify","console","log","render","map","searchResult","isbn"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,YAAP,MAAyB,gBAAzB,C,CACA;;AACA,OAAOC,KAAP,MAAkB,iBAAlB;;AAEA,MAAMC,GAAN,SAAkBJ,KAAK,CAACK,SAAxB,CAAkC;AAAA;AAAA;AAAA,SAChCC,KADgC,GACxB;AACNC,MAAAA,aAAa,EAAE,EADT;AAENC,MAAAA,YAAY,EAAE;AAGhB;;;;;;;;;;;;;;;;;;;AALQ,KADwB;;AAAA,SAqChCC,cArCgC,GAqCf,CAACC,KAAD,EAAQC,IAAR,KAAiB;AAChC,UAAIJ,aAAJ;;AAEA,cAAQI,IAAR;AACE,aAAK,OAAL;AACA,aAAK,QAAL;AACEJ,UAAAA,aAAa,GAAGJ,KAAK,CAACS,MAAN,CAAaC,IAAI,IAAIA,IAAI,CAACF,IAAD,CAAJ,CAAWG,WAAX,GAAyBC,IAAzB,GAAgCC,OAAhC,CAAwCN,KAAK,CAACI,WAAN,GAAoBC,IAApB,EAAxC,IAAsE,CAAC,CAA5F,CAAhB;AACA;;AACF,aAAK,MAAL;AACER,UAAAA,aAAa,GAAGJ,KAAK,CAACS,MAAN,CAAaC,IAAI,IAAIA,IAAI,CAACF,IAAD,CAAJ,CAAWM,QAAX,GAAsBF,IAAtB,OAAiCL,KAAK,CAACK,IAAN,EAAtD,CAAhB;AACA;;AACF;AAAS;AARX;;AAWA,UAAGR,aAAa,CAACW,MAAd,GAAuB,CAA1B,EAA6B;AAC3B,aAAKC,QAAL,CAAc;AAACX,UAAAA,YAAY,EAAE;AAAf,SAAd;AACD,OAFD,MAEO;AACL,aAAKW,QAAL,CAAc;AAACX,UAAAA,YAAY,EAAE;AAAf,SAAd;AACD;;AAED,WAAKW,QAAL,CAAc;AAAEZ,QAAAA;AAAF,OAAd;AACD,KA1D+B;AAAA;;AAyBhCa,EAAAA,iBAAiB,GAAG,CAClB;AACA;AACA;AACA;AACD;;AAEDC,EAAAA,kBAAkB,GAAG;AACnBC,IAAAA,YAAY,CAACC,OAAb,CAAqB,eAArB,EAAsCC,IAAI,CAACC,SAAL,CAAe,KAAKnB,KAAL,CAAWC,aAA1B,CAAtC;AACAmB,IAAAA,OAAO,CAACC,GAAR,CAAYL,YAAZ;AACD;;AAyBDM,EAAAA,MAAM,GAAG;AACP,WACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,UAAD;AAAY,MAAA,cAAc,EAAE,KAAKnB,cAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAQ,KAAKH,KAAL,CAAWE,YAAnB,CAFF,EAIE;AAAI,MAAA,SAAS,EAAC,gBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKF,KAAL,CAAWC,aAAX,CAAyBsB,GAAzB,CACCC,YAAY,IACV,oBAAC,YAAD;AACE,MAAA,GAAG,EAAEA,YAAY,CAACC,IADpB;AAEE,MAAA,OAAO,EAAED,YAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFH,CADH,CAJF,CADF;AAgBD;;AA7E+B;;AAiFlC,eAAe1B,GAAf","sourcesContent":["import React from 'react';\nimport SearchForm from './SearchForm';\nimport SearchResult from './SearchResult';\n// import API from '../services/API';\nimport books from '../sample-books';\n\nclass App extends React.Component {\n  state = {\n    searchresults: [],\n    errorMessage: ''\n  }\n\n  /* I had several problems with the open books api:\n     First I couldn't find a way to search by title or author, just by an id like isbn (reasonable),\n     then I had a CORS policy error, which I overlooked by using a proxy I found on the internet,\n     and at last all my requests were returning an empty object, weird because when using curl on\n     my console they did return book information (although not something I could directly use here)\n     so, in order to not waste more time, I decided to just create some preloaded objects for the excercise,\n     and leave this unused code here so you could take a look at what I was trying to do.\n  \n  searchByIsbn = async (query) => {\n    try {\n      const parameters = `api/autbibkeys=ISBN:${query}`;\n      const response = await API.makeRequest({ parameters: parameters, method: 'GET', data: this.state.searchresults });\n      console.log(response);\n    } catch (error) {\n      alert(error);\n    }\n  }\n  */\n\n  componentDidMount() {\n    // const localStorageRef = localStorage.getItem();\n    // if(localStorageRef) {\n    //   this.setState({searchresults: JSON.parse(localStorageRef)});\n    // }\n  }\n\n  componentDidUpdate() {\n    localStorage.setItem('searchresults', JSON.stringify(this.state.searchresults));\n    console.log(localStorage);\n  }\n\n  searchForBooks = (query, type) => {\n    let searchresults;\n\n    switch (type) {\n      case 'title':\n      case 'author':\n        searchresults = books.filter(book => book[type].toLowerCase().trim().indexOf(query.toLowerCase().trim()) > -1);\n        break;\n      case 'isbn':\n        searchresults = books.filter(book => book[type].toString().trim() === query.trim());\n        break;\n      default: return;\n    }\n\n    if(searchresults.length < 1) {\n      this.setState({errorMessage: 'No results found.'});\n    } else {\n      this.setState({errorMessage: ''});\n    }\n\n    this.setState({ searchresults });\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <SearchForm searchForBooks={this.searchForBooks} />\n        <span> {this.state.errorMessage}</span>\n\n        <ul className=\"search-results\">\n          {this.state.searchresults.map(\n            searchResult =>\n              <SearchResult\n                key={searchResult.isbn}\n                details={searchResult}\n              />)}\n        </ul>\n      </React.Fragment>\n\n    )\n  }\n\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}